<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MirSFlr</title>
<link rel="icon" href="favicon-32x32.png">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{
  --bg-dark:#0a1a2f; --bg-dark2:#142841; --text-light:#fff;
  --accent-blue:#1e90ff; --accent-green:#20c997; --gold:#d4af37; --orange:#ffb86b;
  --card-bg:#14283a; --toggle-width:60px; --toggle-height:28px;
}
body {
  margin:0; font-family:Arial,sans-serif; color:var(--text-light);
  background: var(--bg-dark);
  transition:0.4s; position: relative; overflow-x:hidden;
}
#bgOverlay {
  position: fixed; inset:0; pointer-events:none; z-index:0;
  background: url('background.jpg') center/cover no-repeat;
  opacity:0.25;
}

header { text-align:center; padding:3rem 2rem; position:relative; z-index:2; }
header img#logo { width:160px; margin-bottom:20px; vertical-align:middle; }
header img#flareIcon { width:30px; vertical-align:middle; margin-top:10px; }
header h1 { margin:0; font-size:2.8rem; display:block; }
header p { margin-top:0.5rem; color:#d1d9e6; }

.theme-toggle-wrapper {
  position:fixed; top:20px; right:20px; z-index:10;
}
.theme-toggle {
  position:relative; display:inline-block; width:var(--toggle-width); height:var(--toggle-height);
}
.theme-toggle input { opacity:0; width:0; height:0; }
.slider {
  position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0;
  background-color:#555; border-radius:34px; transition:.4s;
}
.slider:before {
  position:absolute; content:"üí°"; height:24px; width:24px; left:2px; bottom:2px;
  font-size:14px; display:flex; align-items:center; justify-content:center;
  border-radius:50%; background-color:white; transition:.4s;
}
input:checked + .slider { background-color:var(--accent-blue); }
input:checked + .slider:before { transform:translateX(32px); content:"üåô"; }

.cards { display:flex; flex-wrap:wrap; justify-content:center; gap:16px; margin-top:2rem; }
.card { background:var(--card-bg); padding:1.5rem; border-radius:12px;
  transition:0.3s; width:280px; box-shadow:0 8px 20px rgba(0,0,0,0.4); cursor:pointer;}
.card:hover { transform:translateY(-8px); box-shadow:0 18px 40px rgba(30,144,255,0.08);
  background: linear-gradient(135deg,rgba(30,144,255,0.12),var(--card-bg)); }
.card h4 { margin:0 0 8px; }
.card p { margin:0; color:#d1d9e6; }

section { padding:4rem 2rem; max-width:1200px; margin:0 auto; position:relative; z-index:2; }
.charts-grid { display:grid; grid-template-columns:1fr 1fr; gap:24px; }
.chart-box { background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
    padding:1rem; border-radius:12px; box-shadow:0 8px 30px rgba(0,0,0,0.5); position:relative;}
canvas { width:100%!important; height:350px!important; border-radius:8px; }
.chart-desc { margin-top:8px; font-size:0.85rem; text-align:center; color:#d1d9e6; }
.legend { display:flex; gap:12px; justify-content:center; margin-top:10px; color:#d1d9e6; }
.legend .sw { width:14px; height:14px; border-radius:4px; display:inline-block; }

body.light-theme { background: linear-gradient(180deg,#f0f2f5,#e6eef6); color:#10202b; }
body.light-theme .card { background: linear-gradient(135deg,#ffffff,#f2f7fb); color:#10202b; }
body.light-theme .slider { background-color:#888; }
body.light-theme .slider:before { background-color:#fff; }
body.light-theme #bgOverlay { opacity:0.15; }

@media(max-width:1000px){ .charts-grid { grid-template-columns:1fr; } .card{width:100%;} }
</style>
</head>
<body>
<div id="bgOverlay"></div>

<div class="theme-toggle-wrapper">
<label class="theme-toggle">
<input type="checkbox" id="themeToggle">
<span class="slider"></span>
</label>
</div>

<header>
<img id="logo" src="logo.png" alt="MirSFlr Logo">
<h1>MirSFlr</h1>
<p>A trusted validator on the Flare Network</p>
<img id="flareIcon" src="flare-icon.png" alt="Flare Icon">
</header>

<section id="roles">
<h2>Validators ‚Ä¢ Delegators ‚Ä¢ Providers</h2>
<div class="cards">
<div class="card"><h4>üîí Validators</h4><p>Nodes that validate blocks and secure the network.</p></div>
<div class="card"><h4>ü§ù Delegators</h4><p>Token holders who delegate FLR to validators.</p></div>
<div class="card"><h4>üì° Providers</h4><p>Provide oracle data and services to the network.</p></div>
</div>
</section>

<section id="charts">
<h2>Live Metrics</h2>
<div class="charts-grid">
<div class="chart-box" style="grid-column:span 2;">
<h3>FLR Token Value (EUR)</h3>
<p>Latest value: <strong id="latestPrice">-- ‚Ç¨</strong></p>
<canvas id="tokenChart"></canvas>
<p class="chart-desc">Graf prikazuje dnevno ceno FLR tokena v evrih. Podatki prihajajo iz CoinGecko API.</p>
</div>
<div class="chart-box">
<h3>Transactions (last 10 days)</h3>
<canvas id="txChart"></canvas>
<p class="chart-desc">≈†tevilo izvedenih transakcij v omre≈æju Flare.</p>
</div>
<div class="chart-box">
<h3>Active Validators</h3>
<canvas id="validatorsChart"></canvas>
<p class="chart-desc">≈†tevilo validatorjev, ki aktivno potrjujejo bloke.</p>
</div>
<div class="chart-box">
<h3>Stake Distribution</h3>
<canvas id="stakeChart"></canvas>
<div class="legend">
<span class="sw" style="background:#1e90ff"></span> Validators
<span class="sw" style="background:#20c997"></span> Delegators
<span class="sw" style="background:#ffd166"></span> Providers
</div>
<p class="chart-desc">Distribucija vlo≈æenih FLR tokenov med Validators, Delegators in Providers.</p>
</div>
<div class="chart-box">
<h3>Network Activity (last 10 days)</h3>
<canvas id="activityChart"></canvas>
<p class="chart-desc">≈†tevilo novih validatorjev in delegatorjev v omre≈æju Flare.</p>
</div>
</div>
</section>

<section id="contact">
<h2>Contact</h2>
<p style="text-align:center;color:#d1d9e6">Email: <a href="mailto:svensekmir@gmail.com" style="color:#fff;text-decoration:underline">svensekmir@gmail.com</a></p>
</section>

<footer style="text-align:center; padding:2rem; color:#d1d9e6;">
¬© 2025 MirSFlr <img src="flare-icon.png" style="width:20px; vertical-align:middle;">
</footer>

<script>
// Placeholder data
let dates=[], tokenValues=[], txCounts=[], activeValidators=[], stakeData=[50,35,15], newValidators=[], newDelegators=[];
for(let i=9;i>=0;i--){
  const d=new Date(); d.setDate(d.getDate()-i);
  const dd=d.getDate().toString().padStart(2,'0');
  const mm=(d.getMonth()+1).toString().padStart(2,'0');
  dates.push(dd+'-'+mm);
  tokenValues.push(0.027 + Math.random()*0.005);
  txCounts.push(1000 + Math.floor(Math.random()*1000));
  activeValidators.push(18 + Math.floor(Math.random()*5));
  newValidators.push(1+Math.floor(Math.random()*3));
  newDelegators.push(3+Math.floor(Math.random()*8));
}

// Theme toggle
const themeCheckbox=document.getElementById('themeToggle');
themeCheckbox.addEventListener('change',()=>{document.body.classList.toggle('light-theme'); localStorage.setItem('mir_theme', themeCheckbox.checked ? 'light' : 'dark');});
if(localStorage.getItem('mir_theme')==='light'){ document.body.classList.add('light-theme'); themeCheckbox.checked=true; }

// Charts
const tctx=document.getElementById('tokenChart').getContext('2d');
const grad=tctx.createLinearGradient(0,0,0,350);
grad.addColorStop(0,'rgba(30,144,255,0.65)');
grad.addColorStop(1,'rgba(32,201,151,0.05)');
const tokenChart=new Chart(tctx,{
  type:'line',
  data:{labels:dates,datasets:[{label:'FLR (EUR)',data:tokenValues,borderColor:'#1e90ff',backgroundColor:grad,fill:true,tension:0.25,pointRadius:4}]},
  options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{title:{display:true,text:'EUR'}},x:{title:{display:true,text:'Date'}}}}
});
const txctx=document.getElementById('txChart').getContext('2d');
const txChart=new Chart(txctx,{type:'bar',data:{labels:dates,datasets:[{label:'Transactions',data:txCounts,backgroundColor:'#ffb86b'}]},options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true,title:{display:true,text:'Count'}},x:{title:{display:true,text:'Date'}}}}});
const vctx=document.getElementById('validatorsChart').getContext('2d');
const validatorsChart=new Chart(vctx,{type:'line',data:{labels:dates,datasets:[{label:'Active Validators',data:activeValidators,borderColor:'#ffd166',backgroundColor:'rgba(255,209,102,0.12)',fill:true,tension:0.3}]},options:{responsive:true,plugins:{legend:{display:false}}}});
const sctx=document.getElementById('stakeChart').getContext('2d');
const stakeChart=new Chart(sctx,{type:'pie',data:{labels:['Validators','Delegators','Providers'],datasets:[{data:stakeData,backgroundColor:['#1e90ff','#20c997','#ffd166']}]},options:{responsive:true}});
const actctx=document.getElementById('activityChart').getContext('2d');
const activityChart=new Chart(actctx,{type:'line',data:{labels:dates,datasets:[
{label:'New Validators',data:newValidators,borderColor:'#1e90ff',backgroundColor:'rgba(30,144,255,0.2)',fill:true,tension:0.3},
{label:'New Delegators',data:newDelegators,borderColor:'#20c997',backgroundColor:'rgba(32,201,151,0.2)',fill:true,tension:0.3}
]},options:{responsive:true,plugins:{legend:{display:true}}}});

// Live FLR price
async function fetchTokenPrice() {
  try {
    const res=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=flare&vs_currencies=eur');
    const data=await res.json();
    const price=data.flare.eur;
    document.getElementById('latestPrice').textContent=price.toFixed(4)+' ‚Ç¨';
    tokenValues.push(price);
    const d=new Date(); dates.push(d.getDate().toString().padStart(2,'0')+'-'+(d.getMonth()+1).toString().padStart(2,'0'));
    if(tokenValues.length>10){ tokenValues.shift(); dates.shift(); }
    tokenChart.update();
  } catch(e){ console.error(e); }
}
fetchTokenPrice();
setInterval(fetchTokenPrice,5*60*1000);
</script>
</body>
</html>
